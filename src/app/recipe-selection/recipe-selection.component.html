<!-- <form [formGroup]="selectionForm" (ngSubmit)="onSubmit()"> -->
    <div class = "top-bar" name="criteria">
        <div name = "select-category">
            <div name ="select-type">
                <form [formGroup]="typesForm">
                    <input type="checkbox" id="type-all" name="type" value="all" checked="checked" 
                        ng-model="allTypesBox" />
                    <label for="type-all">(Select All)</label>

                    <span formArrayName="typesArray" *ngFor="let type of allTypes; let i = index">
                        <input type="checkbox" [formControl]="typesArray.controls[i]"
                            name="type" id="type-{{ type | lowercase }}" [value]="type" ng-checked="allTypesBox" 
                            [checked]="allSelectedTypes[i]" />
                        <label for="{{ type | lowercase }}">
                            {{ type }}
                        </label>
                    </span>
                </form>
            </div>
            <!-- <pre>{{ typesArray.controls | json }}</pre> -->
            <!-- <button type="submit" [disabled]="!typesForm.valid">Refresh Recipe List</button> -->

            <div name = "select-style">
                <form #styleForm="ngForm">
                    <label for="style">Preparation Style:</label>
                    <br>

                    <input type="checkbox" 
                        id="style-all" 
                        name="{{ styleOptions.name }}" 
                        value="all" 
                        [checked]="allStylesSelected" 
                        (change)="setGroupSelected($event.target.name, $event.target.checked)" />
                    <label for="style-all">(Select All)</label>

                    <span *ngFor="let subOption of styleOptions.subOptions; let i = index">
                        <input type="checkbox"
                            id="style-{{ styleOptions.subOptions[i].name | lowercase }}" 
                            name="{{ styleOptions.name }}"
                            value="{{ styleOptions.subOptions[i].name }}"
                            [(ngModel)]="styleOptions.subOptions[i].selected" 
                            (ngModelChange)="toggleSelected(styleOptions.name, styleOptions.subOptions[i].name, $event)">
                        <label for="style-{{ styleOptions.subOptions[i].name | lowercase }}">{{ styleOptions.subOptions[i].name }}</label>
                    </span>
                </form>
            </div>
            <pre>Styles: {{ allStyles | json }}</pre>
            <pre>Selected: {{ allSelectedStyles | json }}</pre>

            <div name="select-family">
                <label for="family">Family:</label>
                <br>

                <input type="checkbox" id="all" name="family" value="all" checked="checked">
                <label for="all">(Select All)</label>

                <span *ngFor="let family of allFamilies; let i = index">
                    <input type="checkbox" name="family" id="{{ family | lowercase }}" 
                    value = "{{ family | lowercase }}" checked ="checked">
                    <label for="{{ family | lowercase }}">{{ family }}</label>
                </span>
            </div>
        </div>
        
        <div name = "select-components">
            <label for="main">Main Component:</label>
            <br>

            <input type="checkbox" id="all" name="type" value="all" checked="checked">
                <label for="all">(Select All)</label>

            <span *ngFor="let main of allPrimaryComponents; let i = index">
                <input type="checkbox" name="main" id="{{ main | lowercase }}" 
                value = "{{ main | lowercase }}" checked ="checked">
                <label for="{{ main | lowercase }}">{{ main }}</label>
            </span>

            <br>

            <label for="auxiliary">Auxiliary Component:</label>
            <br>

            <input type="checkbox" id="all" name="type" value="all" checked="checked">
                <label for="all">(Select All)</label>

            <span *ngFor="let aux of allSecondaryComponents; let i = index">
                <input type="checkbox" name="aux" id="{{ aux | lowercase }}" 
                value = "{{ aux | lowercase }}" checked ="checked">
                <label for="{{ aux | lowercase }}">{{ aux }}</label>
            </span>
        </div>
    </div>

    <br>
            
    <div class = "bottom-bar" name = "inventory">
        <label for="location">Inventory Location:</label><br>

        <select id="location">
            <option *ngFor="let inventory of allInventories" value="{{ inventory.name | lowercase }}">{{ inventory.name }}</option>
        </select>

        <input type="checkbox" id="available" name="available" value="isAvailable" [(ngModel)]="limitToAvailable">
        <label for="available">Limit to currently available</label>
        <pre>Limit: {{ limitToAvailable }}</pre>
    </div>

     <!-- <button type="submit" [disabled]="!selectionForm.valid">Refresh Recipe List</button> -->
<!--</form> -->

<hr>

<app-recipe-list 
    [types]="allSelectedTypes"
    [styles]="allSelectedStyles"
    [families]="allSelectedFamilies"
    [primaries]="allSelectedPrimaryComponents"
    [secondaries]="allSelectedSecondaryComponents"
    [limit]="limitToAvailable"
></app-recipe-list>