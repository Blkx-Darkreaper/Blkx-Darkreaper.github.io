<!-- <form [formGroup]="selectionForm" (ngSubmit)="onSubmit()"> -->
    <div class = "top-bar" name="criteria">
        <div name = "select-category">
            <div name ="select-type">
                <form #typeForm="ngForm">
                    <label for="Type">Drink Type:</label>
                    <br>

                    <input type="checkbox" 
                        id="type-all" 
                        name="{{ typeOptions.name }}" 
                        value="all" 
                        [checked]="areAllTypesSelected"
                        (change)="setGroupSelected($event.target.name, $event.target.checked)" />
                    <label for="type-all">(Select All)</label>

                    <span *ngFor="let subOption of typeOptions.subOptions; let i = index">
                        <input type="checkbox"
                            id="type-{{ typeOptions.subOptions[i].name | lowercase }}" 
                            name="{{ typeOptions.name }}"
                            value="{{ typeOptions.subOptions[i].name }}"
                            [(ngModel)]="typeOptions.subOptions[i].selected" 
                            (ngModelChange)="toggleSelected(typeOptions.name, typeOptions.subOptions[i].name, $event)">
                        <label for="type-{{ typeOptions.subOptions[i].name | lowercase }}">
                            {{ typeOptions.subOptions[i].name }}
                        </label>
                    </span>
                </form>
            </div>
            <!-- <pre>Types: {{ allTypes | json }}</pre>
            <pre>Selected: {{ allSelectedTypes | json }}</pre> -->

            <div name ="select-occassion">
                <form #occassionForm="ngForm">
                    <label for="Type">Appropriate for Occassion:</label>
                    <br>

                    <input type="checkbox" 
                        id="occassion-all" 
                        name="{{ occassionOptions.name }}" 
                        value="all" 
                        [checked]="areAllOccassionsSelected"
                        (change)="setGroupSelected($event.target.name, $event.target.checked)" />
                    <label for="occassion-all">(Select All)</label>

                    <span *ngFor="let subOption of occassionOptions.subOptions; let i = index">
                        <input type="checkbox"
                            id="occassion-{{ occassionOptions.subOptions[i].name | lowercase }}" 
                            name="{{ occassionOptions.name }}"
                            value="{{ occassionOptions.subOptions[i].name }}"
                            [(ngModel)]="occassionOptions.subOptions[i].selected" 
                            (ngModelChange)="toggleSelected(occassionOptions.name, occassionOptions.subOptions[i].name, $event)">
                        <label for="type-{{ occassionOptions.subOptions[i].name | lowercase }}">
                            {{ occassionOptions.subOptions[i].name }}
                        </label>
                    </span>
                </form>
            </div>
            <!-- <pre>Types: {{ allOccassions | json }}</pre>
            <pre>Selected: {{ allSelectedOccassions | json }}</pre> -->

            <div name = "select-style">
                <form #styleForm="ngForm">
                    <label for="Style">Preparation Style:</label>
                    <br>

                    <input type="checkbox" 
                        id="style-all" 
                        name="{{ styleOptions.name }}" 
                        value="all" 
                        [checked]="areAllStylesSelected" 
                        (change)="setGroupSelected($event.target.name, $event.target.checked)" />
                    <label for="style-all">(Select All)</label>

                    <span *ngFor="let subOption of styleOptions.subOptions; let i = index">
                        <input type="checkbox"
                            id="style-{{ styleOptions.subOptions[i].name | lowercase }}" 
                            name="{{ styleOptions.name }}"
                            value="{{ styleOptions.subOptions[i].name }}"
                            [(ngModel)]="styleOptions.subOptions[i].selected" 
                            (ngModelChange)="toggleSelected(styleOptions.name, styleOptions.subOptions[i].name, $event)">
                        <label for="style-{{ styleOptions.subOptions[i].name | lowercase }}">
                            {{ styleOptions.subOptions[i].name }}
                        </label>
                    </span>
                </form>
            </div>
            <!-- <pre>Styles: {{ allStyles | json }}</pre>
            <pre>Selected: {{ allSelectedStyles | json }}</pre> -->

            <div name="select-family">
                <form #familyForm="ngForm">
                    <label for="Family">Cocktail Family:</label>
                    <br>

                    <input type="checkbox" 
                        id="family-all" 
                        name="{{ familyOptions.name }}" 
                        value="all" 
                        [checked]="areAllFamiliesSelected" 
                        (change)="setGroupSelected($event.target.name, $event.target.checked)" />
                    <label for="family-all">(Select All)</label>

                    <span *ngFor="let subOption of familyOptions.subOptions; let i = index">
                        <input type="checkbox"
                            id="family-{{ familyOptions.subOptions[i].name | lowercase }}" 
                            name="{{ familyOptions.name }}"
                            value="{{ familyOptions.subOptions[i].name }}"
                            [(ngModel)]="familyOptions.subOptions[i].selected" 
                            (ngModelChange)="toggleSelected(familyOptions.name, familyOptions.subOptions[i].name, $event)">
                        <label for="family-{{ familyOptions.subOptions[i].name | lowercase }}">
                            {{ familyOptions.subOptions[i].name }}
                        </label>
                    </span>
                </form>
            </div>
            <!-- <pre>Families: {{ allFamilies | json }}</pre>
            <pre>Selected: {{ allSelectedFamilies | json }}</pre> -->
        </div>
        
        <div name = "select-components">
            <form #componentsForm="ngForm">
                <label for="Main">Main Components:</label>
                <br>

                <input type="checkbox" 
                    id="primary-all" 
                    name="{{ primaryOptions.name }}" 
                    value="all" 
                    [checked]="areAllPrimaryComponentsSelected" 
                    (change)="setGroupSelected($event.target.name, $event.target.checked)" />
                <label for="primary-all">(Select All)</label>

                <span *ngFor="let subOption of primaryOptions.subOptions; let i = index">
                    <input type="checkbox"
                        id="primary-{{ primaryOptions.subOptions[i].name | lowercase }}" 
                        name="{{ primaryOptions.name }}"
                        value="{{ primaryOptions.subOptions[i].name }}"
                        [(ngModel)]="primaryOptions.subOptions[i].selected" 
                        (ngModelChange)="toggleSelected(primaryOptions.name, primaryOptions.subOptions[i].name, $event)">
                    <label for="primary-{{ primaryOptions.subOptions[i].name | lowercase }}">
                        {{ primaryOptions.subOptions[i].name }}
                    </label>
                </span>
                <!-- <pre>Main Components: {{ allPrimaryComponents | json }}</pre>
                <pre>Selected: {{ allSelectedPrimaryComponents | json }}</pre> -->

                <br>

                <label for="Auxiliary">Auxiliary Components:</label>
                <br>

                <input type="checkbox" 
                        id="secondary-all" 
                        name="{{ secondaryOptions.name }}" 
                        value="all" 
                        [checked]="areAllSecondaryComponentsSelected" 
                        (change)="setGroupSelected($event.target.name, $event.target.checked)" />
                    <label for="secondary-all">(Select All)</label>

                    <span *ngFor="let subOption of secondaryOptions.subOptions; let i = index">
                        <input type="checkbox"
                            id="secondary-{{ secondaryOptions.subOptions[i].name | lowercase }}" 
                            name="{{ secondaryOptions.name }}"
                            value="{{ secondaryOptions.subOptions[i].name }}"
                            [(ngModel)]="secondaryOptions.subOptions[i].selected" 
                            (ngModelChange)="toggleSelected(secondaryOptions.name, secondaryOptions.subOptions[i].name, $event)">
                        <label for="secondary-{{ secondaryOptions.subOptions[i].name | lowercase }}">
                            {{ secondaryOptions.subOptions[i].name }}
                        </label>
                    </span>
                    <!-- <pre>Auxiliary Components: {{ allSecondaryComponents | json }}</pre>
                    <pre>Selected: {{ allSelectedSecondaryComponents | json }}</pre> -->
            </form>
        </div>
    </div>

    <br>
            
    <div class = "bottom-bar" name = "inventory">
        <label for="location">Inventory Location:</label><br>

        <select id="location">
            <option *ngFor="let inventory of allInventories" value="{{ inventory.name | lowercase }}">{{ inventory.name }}</option>
        </select>

        <input type="checkbox" id="available" name="available" value="isAvailable" [(ngModel)]="limitToAvailable">
        <label for="available">Limit to currently available</label>
        <!-- <pre>Limit: {{ limitToAvailable }}</pre> -->
    </div>

     <!-- <button type="submit" [disabled]="!selectionForm.valid">Refresh Recipe List</button> -->
<!--</form> -->

<hr>

<app-recipe-list 
    [types]="allSelectedTypes"
    [occassions]="allSelectedOccassions"
    [styles]="allSelectedStyles"
    [families]="allSelectedFamilies"
    [primaries]="allSelectedPrimaryComponents"
    [secondaries]="allSelectedSecondaryComponents"
    [limit]="limitToAvailable"
></app-recipe-list>